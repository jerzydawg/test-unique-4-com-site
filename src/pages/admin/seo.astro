---
import AdminLayout from '../../layouts/AdminLayout.astro';
import { supabase } from '../../lib/supabase';
import { getSiteURL, getDomain, getDesignDNA } from '../../lib/site-config';

export const prerender = true;

const SITE_URL = getSiteURL();
const DOMAIN = getDomain();
const title = `SEO Management | ${DOMAIN} Admin`;
---

<AdminLayout title={title}>
  <div class="min-h-screen bg-gray-50">
    <!-- Admin Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-6">
          <div class="flex items-center">
            <a href="/admin" class="text-gray-900 hover: mr-4">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
              </svg>
            </a>
            <h1 class="text-gray-900 text-2xl font-bold ">SEO Management</h1>
          </div>
          <div class="flex items-center space-x-4">
            <span class="text-gray-900 text-sm ">Welcome, Admin</span>
            <a href="/admin" class="text-sm text-red-600 hover:text-red-800">Back to Dashboard</a>
          </div>
        </div>
      </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Page Selection -->
      <div class="mb-8 text-gray-900">
        <label for="page-select" class="block text-sm font-medium mb-2 text-gray-900">
          Select Page to Edit
        </label>
        <select id="page-select" class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500">
          <option value="homepage">Homepage</option>
          <option value="state-page">State Pages</option>
          <option value="city-page">City Pages</option>
          <option value="compare">Provider Compare</option>
          <option value="apply">Application Form</option>
          <option value="eligibility">Eligibility Checker</option>
        </select>
      </div>

      <!-- SEO Form -->
      <div class="bg-white rounded-lg shadow">
        <div class="px-6 py-4 border-b border-gray-200">
          <h3 class="text-gray-900 text-lg font-medium ">SEO Settings</h3>
        </div>
        <div class="p-6">
          <form class="space-y-4">
            <!-- Page Title -->
            <div>
              <label for="page-title" class="block text-sm font-medium mb-2 text-gray-900">
                Page Title
              </label>
              <input
                type="text"
                id="page-title"
                name="page-title"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder={`Free Phone Service - Lifeline & ACP Programs | ${DOMAIN}`}
                value={`Free Phone Service - Lifeline & ACP Programs | ${DOMAIN}`}
              />
              <p class="text-gray-900 mt-1 text-sm ">
                Recommended length: 50-60 characters
              </p>
            </div>

            <!-- Meta Description -->
            <div>
              <label for="meta-description" class="block text-sm font-medium mb-2 text-gray-900">
                Meta Description
              </label>
              <textarea
                id="meta-description"
                name="meta-description"
                rows="3"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="Get free phone service through government Lifeline and ACP programs. Check eligibility, compare providers, and apply online."
              >Get free phone service through government Lifeline and ACP programs. Check eligibility, compare providers, and apply online. No cost to qualified low-income Americans.</textarea>
              <p class="text-gray-900 mt-1 text-sm ">
                Recommended length: 150-160 characters
              </p>
            </div>

            <!-- Open Graph Title -->
            <div>
              <label for="og-title" class="block text-sm font-medium mb-2 text-gray-900">
                Open Graph Title
              </label>
              <input
                type="text"
                id="og-title"
                name="og-title"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="Free Phone Service - Lifeline & ACP Programs"
                value="Free Phone Service - Lifeline & ACP Programs"
              />
            </div>

            <!-- Open Graph Description -->
            <div>
              <label for="og-description" class="block text-sm font-medium mb-2 text-gray-900">
                Open Graph Description
              </label>
              <textarea
                id="og-description"
                name="og-description"
                rows="3"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="Get free phone service through government programs. Check eligibility and apply online."
              >Get free phone service through government Lifeline and ACP programs. Check eligibility, compare providers, and apply online.</textarea>
            </div>

            <!-- Keywords -->
            <div>
              <label for="keywords" class="block text-sm font-medium mb-2 text-gray-900">
                Keywords (comma-separated)
              </label>
              <input
                type="text"
                id="keywords"
                name="keywords"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder="free phone service, lifeline program, ACP program, government assistance"
                value="free phone service, lifeline program, ACP program, government assistance, low income phone, free mobile service"
              />
            </div>

            <!-- Canonical URL -->
            <div>
              <label for="canonical-url" class="block text-sm font-medium mb-2 text-gray-900">
                Canonical URL
              </label>
              <input
                type="url"
                id="canonical-url"
                name="canonical-url"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                placeholder={`${SITE_URL}/`}
                value={`${SITE_URL}/`}
              />
            </div>

            <!-- Structured Data -->
            <div>
              <label class="block text-sm font-medium mb-2 text-gray-900">
                Structured Data (JSON-LD)
              </label>
              <textarea
                rows="8"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono text-sm"
                placeholder={`{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "${DOMAIN}",
  "url": "${SITE_URL}"
}`}
              >{`{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "${DOMAIN}",
  "url": "${SITE_URL}",
  "description": "Helping low-income Americans access free phone service through government programs",
  "logo": "${SITE_URL}/logo.png"
}`}</textarea>
            </div>

            <!-- Save Button -->
            <div class="flex justify-end space-x-4">
              <button
                type="button"
                class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
              >
                Preview
              </button>
              <button
                type="submit"
                class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
              >
                Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- SEO Tips -->
      <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
        <h4 class="text-gray-900 text-lg font-medium text-blue-900 mb-4 ">SEO Best Practices</h4>
        <ul class="space-y-2 text-sm text-blue-800">
          <li>• Include primary keywords in the title tag</li>
          <li>• Write compelling meta descriptions that encourage clicks</li>
          <li>• Use unique titles and descriptions for each page</li>
          <li>• Keep titles under 60 characters for optimal display</li>
          <li>• Include location-specific keywords for city/state pages</li>
          <li>• Use structured data to help search engines understand your content</li>
        </ul>
      </div>
    </div>
  </div>
</Layout> 